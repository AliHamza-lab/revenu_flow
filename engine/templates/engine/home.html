{% extends 'engine/base.html' %}

{% block content %}
<div class="elite-fade-in" style="max-width: 1400px; margin: 0 auto; padding: 24px;">
    <!-- Category Pills Navigation -->
    <div
        style="display: flex; gap: 12px; margin-bottom: 32px; overflow-x: auto; padding-bottom: 8px; border-bottom: 1px solid var(--border);">
        <a href="{% url 'home' %}" class="btn-elite"
            style="background: #0F0F0F; color: #fff; padding: 6px 16px; border-radius: 8px; font-weight: 500; border: none;">All</a>
        {% for cat in categories %}
        <a href="{% url 'category_videos' cat.slug %}" class="btn-elite"
            style="padding: 6px 16px; border-radius: 8px; font-weight: 500; background: var(--hover); color: #0F0F0F; border: none; transition: background 0.2s;">{{
            cat.name }}</a>
        {% endfor %}
    </div>

    <!-- Cinematic Mosaic -->
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 40px 16px;">
        {% for video in videos %}
        <div class="mosaic-item elite-fade-in"
            style="display: flex; flex-direction: column; gap: 12px; cursor: pointer;">
            <a href="{% url 'watch' video.id %}" style="text-decoration: none; color: inherit;">
                <div style="aspect-ratio: 16 / 9; background: var(--surface); border-radius: 12px; overflow: hidden; position: relative; transition: border-radius 0.3s;"
                    onmouseover="this.style.borderRadius='0';" onmouseout="this.style.borderRadius='12px';">
                    {% if video.thumbnail %}
                    <img src="{{ video.thumbnail.url }}" style="width:100%; height:100%; object-fit: cover;">
                    {% else %}
                    <div
                        style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color: var(--text-muted); font-size: 13px; font-weight: 500;">
                        No Thumbnail</div>
                    {% endif %}
                    <div
                        style="position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.8); color: white; padding: 2px 4px; border-radius: 4px; font-size: 12px; font-weight: 500;">
                        {{ video.duration|default:"0:00" }}</div>
                </div>

                <div style="display: flex; gap: 12px; margin-top: 4px;">
                    <div
                        style="width:36px; height:36px; border-radius:50%; background:#70B5F9; color:white; flex-shrink:0; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size: 14px;">
                        {{ video.uploader.username|first|upper|default:"V" }}
                    </div>
                    <div style="flex:1;">
                        <h3
                            style="font-size: 16px; font-weight: 600; line-height: 1.4; color: #0F0F0F; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                            {{ video.title }}</h3>
                        <p style="font-size: 14px; color: #606060; margin-bottom: 2px;">{{
                            video.uploader.username|default:"Vortex Official" }}</p>
                        <p style="font-size: 14px; color: #606060;">{{ video.views }} views â€¢ {{
                            video.created_at|timesince }} ago</p>
                    </div>
                </div>
            </a>
        </div>
        {% empty %}
        <div style="grid-column: 1 / -1; text-align: center; padding: 120px 0;">
            <h2 style="color: #606060; font-family: 'Outfit'; font-weight: 600;">No cinematic visions found.</h2>
            <p style="color: #909090; margin-top: 10px;">Be the first to release a masterpiece.</p>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    .mosaic-item:hover h3 {
        color: #065FD4;
    }

    .mosaic-item:hover img {
        transform: scale(1.02);
    }

    img {
        transition: transform 0.3s;
    }
</style>
{% endblock %}